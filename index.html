<html><head><meta name="viewport" content="width=device-width,initial-scale=0.8"><title>夏果</title><link rel="stylesheet" type="text/css" href="main.css"><link href="./imgs/f.ico" rel="icon"></head><body><div class="container"><a href='../'><img src='./imgs/head.svg' class='d1'></a><img src="./imgs/20250517.webp" class="d1"/><img src="./imgs/20250209.webp" class="d1"/><img src="./imgs/20241116.webp" class="d1"/><img src="./imgs/20240929.webp" class="d1"/><img src="./imgs/20240908.webp" class="d1"/><img src="./imgs/20240831.webp" class="d1"/><img src="./imgs/20240126.webp" class="d1"/><img src="./imgs/20231226.webp" class="d1" id="lst"/></br><img src="./imgs/20250423.webp" class="photo"/><img src="./imgs/20250208.webp" class="photo"/><img src="./imgs/20241008.webp" class="photo"/><img src="./imgs/20240928.webp" class="photo"/><img src="./imgs/20240909.webp" class="photo"/><img src="./imgs/20240902.webp" class="photo"/><img src="./imgs/20240127.webp" class="photo"/><img src="./imgs/20240123.webp" class="photo" id="lst"/></br><img src="./imgs/20250215.webp" class="photo"/><img src="./imgs/20250111.webp" class="photo"/><img src="./imgs/20241006.webp" class="photo"/><img src="./imgs/20240922.webp" class="photo"/><img src="./imgs/20240921.webp" class="photo"/><img src="./imgs/20240907.webp" class="photo"/><img src="./imgs/20240129.webp" class="photo"/><img src="./imgs/20240124.webp" class="photo"/><img src="./imgs/20231224.webp" class="photo" id="lst"/></div><script src="https://cdn.jsdelivr.net/npm/exif-js"></script><div id="lightbox">    <img id="lightboxImg">    <div id="caption"></div></div><script>window.onload = function() {            var images = document.querySelectorAll('.container img');            images = Array.from(images).slice(1);            images.forEach(function(img) {                img.addEventListener('click', function() {                    openLightbox(img);                });            });            var lightbox = document.getElementById('lightbox');            var lightboxImg = document.getElementById('lightboxImg');            lightbox.addEventListener('click', function(e) {                if (e.target !== lightboxImg) {                    closeLightbox();                }            });            lightboxImg.addEventListener('click', function() {                var src = lightboxImg.src;                var filename = src.split('/').pop();                var basename = filename.split('.').slice(0, -1).join('.');                window.location.href = basename + ".html";            });        };        function openLightbox(element) {            var lightbox = document.getElementById('lightbox');            var lightboxImg = document.getElementById('lightboxImg');            var caption = document.getElementById('caption');            lightboxImg.src = element.src;            caption.innerHTML = element.alt;            var src = lightboxImg.src;            var fileExtension = src.split('.').pop().toLowerCase();            if (fileExtension === 'jpeg' || fileExtension === 'jpg') {                EXIF.getData(element, function() {                    var userComment = EXIF.getTag(this, 'UserComment');                    if (userComment) {                        var trimmedComment = userComment.slice(8);                        var decodedComment = decodeUserComment(trimmedComment);                        caption.innerHTML += decodedComment;                    }                });            } else if (fileExtension === 'webp') {                fetch(src)                    .then(response => response.arrayBuffer())                    .then(buffer => parseXmpMetadata(new Uint8Array(buffer)))                    .then(xmpData => {                        var description = extractDescription(xmpData);                        if (description) {                            caption.innerHTML += description;                        }                    })                    .catch(error => console.error('Error fetching WebP metadata:', error));            }            lightbox.style.display = "flex";            lightbox.style.flexDirection = "column";        }        function closeLightbox() {            var lightbox = document.getElementById('lightbox');            lightbox.style.display = "none";        }        function decodeUserComment(userComment) {            var uint8Array = new Uint8Array(userComment);            var decoder = new TextDecoder('utf-16le');            return decoder.decode(uint8Array);        }        function parseXmpMetadata(uint8Array) {                        var decoder = new TextDecoder('utf-8');            var xmpString = decoder.decode(uint8Array);                        return xmpString;        }        function extractDescription(xmpData) {                                    var descriptionMatch = xmpData.match(/<dc:description>(.*?)<\/dc:description>/);            return descriptionMatch ? descriptionMatch[1] : '';        }</script></body></html>